<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
	<title>Dovedale Live Map</title>
	<script src="https://cdn.tailwindcss.com/3.4.16"></script>
	<link rel="stylesheet"
		href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&family=Inter:opsz,wght@14..32,200..700" />
	<meta name="description" content="A live map of Dovedale Railway, showing players with a server selector." />
	<meta name="keywords" content="dovedale, railway, dovedale railway, dovedale map, live map, dovedale railway map" />
	<link rel="canonical" href="https://map.dovedale.wiki/" />

	<meta property="og:title" content="Dovedale Live Map" />
	<meta property="og:description"
		content="A live map of Dovedale Railway, showing players across all or a specific server." />
	<meta property="og:image" content="https://map.dovedale.wiki/images/map-small.png" />
	<meta property="og:url" content="https://map.dovedale.wiki/" />
	<meta name="twitter:card" content="summary_large_image" />
	<meta name="twitter:title" content="Dovedale Live Map" />
	<meta name="twitter:description"
		content="A live map of Dovedale Railway, showing players across all or a specific server." />
	<meta name="twitter:image" content="https://map.dovedale.wiki/images/map-small.png" />
	<style>
		@font-face {
			font-family: 'Inter';
			src: local('Inter'), url(/Inter.ttf) format('ttf');
		}
	</style>
</head>

<body class="bg-zinc-950 text-white text-xl overflow-hidden h-full w-full fixed font-[Inter]">

	<div id="connectionPopup" class="fixed top-5 left-1/2 transform -translate-x-1/2 z-50 bg-black/90 border border-zinc-600 rounded-lg p-4 backdrop-blur-md shadow-2xl max-w-xs transition-all duration-300 opacity-0 -translate-y-5 pointer-events-none">
		<div class="flex items-center gap-3">
			<div class="text-red-400 flex-shrink-0">
				<i class="material-symbols-outlined text-6">edit</i>
			</div>
			<div class="flex-1">
				<h3 class="text-sm font-semibold mb-1 m-0">Connection Lost</h3>
				<p class="text-xs text-zinc-300 m-0">Unable to connect to the server</p>
			</div>
			<button id="reconnectBtn" class="bg-blue-600 hover:bg-blue-700 disabled:bg-zinc-600 disabled:cursor-not-allowed text-white border-none rounded-md px-3 py-2 text-xs font-medium cursor-pointer flex items-center gap-1.5 transition-colors duration-200 whitespace-nowrap">
				<i id="reconnectIcon" class="material-symbols-outlined text-4">refresh</i>
				Reconnect
			</button>
		</div>
	</div>

	<div class="fixed top-2 left-2 flex gap-3 items-center z-20">
		<select class="bg-zinc-800 px-2 py-1 rounded text-base sm:text-xl" id="servers"></select>
		<p id="players" class="hidden">Players: N/A</p>
	</div>

	<div class="fixed top-2 right-2 flex gap-2 sm:hidden z-20">
		<button id="zoom-in" class="bg-zinc-800 w-10 h-10 flex items-center justify-center rounded-full">
			<span class="material-symbols-outlined">add</span>
		</button>
		<button id="zoom-out" class="bg-zinc-800 w-10 h-10 flex items-center justify-center rounded-full">
			<span class="material-symbols-outlined">remove</span>
		</button>
	</div>

	<div class="w-full h-full">
		<canvas width="2867.7" height="1372.2"></canvas>
	</div>

	<dialog id="dialog" class="hidden p-3 bg-zinc-800 text-white rounded-2xl flex flex-col gap-5">
		<form class="flex gap-3 align-center justify-center" id="lever-form">
			<label class="content-center" for="box">Box:</label>
			<input class="bg-zinc-700 rounded w-20 px-2" type="text" id="box" name="name" required />
			<label class="content-center" for="lever">Lever:</label>
			<input class="bg-zinc-700 rounded w-20 px-2" type="number" id="lever" name="lever" required />
			<button class="bg-zinc-700 px-3 py-1 rounded-lg">Change</button>
		</form>
		<form method="dialog">
			<button class="bg-zinc-700 px-3 py-1 rounded-lg">Close</button>
		</form>
	</dialog>

	<div id="tooltip"
		class="pl-3 pr-3.5 py-3 bg-zinc-800 rounded-2xl inline-flex flex-col justify-start items-start gap-2.5 fixed hidden sm:max-w-md max-w-[90vw] z-20">
		<div id="player" class="inline-flex justify-center items-center gap-1.5">
			<span class="material-symbols-outlined">person</span>
			<div class="text-xl">MrToes_guy</div>
		</div>
		<div id="destination" class="inline-flex justify-center items-center gap-1.5">
			<span class="material-symbols-outlined">location_on</span>
			<div class="text-xl">Sebi's House</div>
		</div>
		<div id="train-name" class="inline-flex justify-center items-center gap-1.5">
			<span class="material-symbols-outlined">train</span>
			<div class="text-xl">Class 2 Bajillion</div>
		</div>
		<div id="headcode" class="inline-flex justify-center items-center gap-1.5">
			<span class="material-symbols-outlined">pin</span>
			<div class="text-xl">1P11</div>
		</div>
		<div id="train-class" class="inline-flex justify-center items-center gap-1.5">
			<span class="material-symbols-outlined">tag</span>
			<div class="text-xl">Passenger</div>
		</div>
		<div id="server" class="inline-flex justify-center items-center gap-1.5">
			<span class="material-symbols-outlined">dns</span>
			<div class="text-xl">2832198b</div>
		</div>
	</div>

	<a class="fixed bottom-2 right-2 flex p-2 align-center bg-zinc-800 rounded-lg hidden z-20" target="_blank"
		href="https://map.dovedale.wiki" id="pop-out">
		<i class="material-symbols-outlined">arrow_outward</i>
	</a>

	<div
		class="fixed bottom-2 right-3 flex gap-3 h-min items-end z-20">
		<button id="levers" class="hidden bg-zinc-800 px-3 py-1 rounded-lg">Levers</button>
		<a href="https://github.com/dovedalerailway/dovedale-map"
			target="_blank"
			class="bg-zinc-800 p-2 rounded-lg hover:bg-zinc-700 transition z-30"
			title="GitHub Repository">
			<svg xmlns="http://www.w3.org/2000/svg" fill="white" viewBox="0 0 24 24" width="28" height="28">
				<path d="M12 .5C5.73.5.5 5.73.5 12.02c0 5.1 3.3 9.42 7.88 10.96.58.1.77-.25.77-.56v-2.02c-3.21.7-3.89-1.54-3.89-1.54-.53-1.34-1.3-1.7-1.3-1.7-1.06-.73.08-.72.08-.72 1.17.08 1.78 1.2 1.78 1.2 1.04 1.78 2.73 1.26 3.4.97.1-.76.41-1.26.74-1.55-2.56-.3-5.25-1.28-5.25-5.7 0-1.26.45-2.3 1.2-3.12-.12-.3-.52-1.52.12-3.17 0 0 .97-.31 3.18 1.19a11.1 11.1 0 0 1 5.8 0C17.1 6.2 18.07 6.5 18.07 6.5c.64 1.65.24 2.87.12 3.17.75.82 1.2 1.86 1.2 3.12 0 4.43-2.7 5.4-5.27 5.7.42.36.8 1.07.8 2.16v3.2c0 .31.2.67.78.56A10.52 10.52 0 0 0 23.5 12C23.5 5.73 18.27.5 12 .5Z"/>
			</svg>
		</a>
	</div>

	<div class="fixed bottom-2 left-3 flex gap-3 h-min items-end z-20">
		<p class="text-zinc-500 text-sm hidden sm:block h-auto" id="hover-hint">Hover over a dot to see the player's name</p>
	</div>
	
	<script src="index.js?v=20"></script>
</body>

</html>
